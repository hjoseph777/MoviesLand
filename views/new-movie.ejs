<!DOCTYPE html>
<html lang="en">
    <header style="margin-bottom:20px;">
    <% if (user) { %>
        <span>Logged in as <%= user.username %></span>
        <a href="/auth/logout" style="margin-left:15px;">Logout</a>
    <% } else { %>
        <a href="/auth/login">Login</a>
        <a href="/auth/register" style="margin-left:10px;">Register</a>
    <% } %>
</header>

<head>
    <meta charset="UTF-8">
    <title>Add New Movie</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; padding: 0 1rem; }
        .form-group { margin-bottom: 1rem; }
        label { display: block; margin-bottom: .5rem; font-weight: bold; }
        input, textarea { width: 100%; padding: .5rem; box-sizing: border-box; }
        .error { color: red; font-size: 0.875rem; margin-top: .25rem; }
        button { padding: 0.75rem 1.5rem; background: #007BFF; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>

    <h1>Add a New Movie</h1>

    <% if (errors.general) { %>
        <p class="error"><%= errors.general %></p>
    <% } %>

    <form action="/movies" method="POST">
        <div class="form-group">
            <label for="name">Movie Name</label>
            <input type="text" id="name" name="name" value="<%= formData.name || '' %>">
            <% if (errors.name) { %> <div class="error"><%= errors.name %></div> <% } %>
        </div>

        <div class="form-group">
            <label for="director">Director</label>
            <input type="text" id="director" name="director" value="<%= formData.director || '' %>">
            <% if (errors.director) { %> <div class="error"><%= errors.director %></div> <% } %>
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" name="description"><%= formData.description || '' %></textarea>
        </div>

        <div class="form-group">
            <label for="year">Year</label>
            <input type="number" id="year" name="year" value="<%= formData.year || '' %>">
            <% if (errors.year) { %> <div class="error"><%= errors.year %></div> <% } %>
        </div>

        <div class="form-group">
            <label for="genres">Genres (comma separated)</label>
            <input type="text" id="genres" name="genres" value="<%= formData.genres || '' %>" placeholder="Action, Comedy">
        </div>

        <div class="form-group">
            <label for="rating">Rating (0-10)</label>
            <input type="number" id="rating" name="rating" step="0.1" min="0" max="10" value="<%= formData.rating || '' %>">
        </div>

        <button type="submit">Add Movie</button>
    </form>

</body>
</html>