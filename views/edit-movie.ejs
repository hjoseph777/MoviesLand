<!DOCTYPE html>
<html>
    <header style="margin-bottom:20px;">
    <% if (user) { %>
        <span>Logged in as <%= user.username %></span>
        <a href="/auth/logout" style="margin-left:15px;">Logout</a>
    <% } else { %>
        <a href="/auth/login">Login</a>
        <a href="/auth/register" style="margin-left:10px;">Register</a>
    <% } %>
</header>

<head>
    <title>Edit <%= movie.name %></title>
</head>
<body>

    <h1>Edit Movie</h1>

    <% if (errors && Object.keys(errors).length > 0) { %>
        <ul style="color: red;">
            <% Object.keys(errors).forEach(key => { %>
                <li><%= errors[key] %></li>
            <% }); %>
        </ul>
    <% } %>

    <form action="/movies/<%= movie._id %>/edit" method="POST">

        <label>Name:</label><br>
        <input type="text" name="name" value="<%= movie.name %>"><br><br>

        <label>Description:</label><br>
        <textarea name="description"><%= movie.description %></textarea><br><br>

        <label>Year:</label><br>
        <input type="number" name="year" value="<%= movie.year %>"><br><br>

        <label>Genres (comma separated):</label><br>
        <input type="text" name="genres" value="<%= movie.genres.join(', ') %>"><br><br>

        <label>Rating (0â€“10):</label><br>
        <input type="number" name="rating" value="<%= movie.rating %>" step="0.1"><br><br>

        <label>Director:</label><br>
        <input type="text" name="director" value="<%= movie.director %>"><br><br>

        <button type="submit">Update Movie</button>

    </form>

</body>
</html>